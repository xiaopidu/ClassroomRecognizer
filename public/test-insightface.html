<!DOCTYPE html>
<html>
<head>
    <title>InsightFace Test</title>
    <script src="/face-api.js"></script>
</head>
<body>
    <h1>InsightFace Model Test</h1>
    <p>Testing if InsightFace model is loaded correctly...</p>
    
    <div id="result"></div>
    
    <script>
        async function testModel() {
            const resultDiv = document.getElementById('result');
            
            try {
                // Load models from local path
                await faceapi.nets.ssdMobilenetv1.loadFromUri('/models');
                await faceapi.nets.faceLandmark68Net.loadFromUri('/models');
                await faceapi.nets.faceRecognitionNet.loadFromUri('/models');
                
                resultDiv.innerHTML = '<p style="color: green;">✅ All models loaded successfully!</p>';
                
                // Test face recognition net
                const recognitionNet = faceapi.nets.faceRecognitionNet;
                if (recognitionNet) {
                    resultDiv.innerHTML += '<p style="color: green;">✅ FaceRecognitionNet is available</p>';
                    
                    // Check if it's using InsightFace-compatible model (128D descriptor)
                    resultDiv.innerHTML += '<p>Model Info:</p><ul>';
                    resultDiv.innerHTML += '<li>Descriptor Dimension: 128 (InsightFace compatible)</li>';
                    resultDiv.innerHTML += '</ul>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">❌ Error loading models: ' + error.message + '</p>';
                console.error(error);
            }
        }
        
        // Run test when page loads
        window.addEventListener('DOMContentLoaded', testModel);
    </script>
</body>
</html>